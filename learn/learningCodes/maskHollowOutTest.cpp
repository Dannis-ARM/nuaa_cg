#include<gl/glut.h>
#include<stdio.h>
#include<stdlib.h>
#define _CRT_SECURE_NO_WARNINGS

void display() {
	glClear(GL_COLOR_BUFFER_BIT);
	static GLubyte Mask[128] = {
		0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00,
		0x03, 0x80, 0x01, 0xC0,
		0x06, 0xC0, 0x03, 0x60,
		0x04, 0x60, 0x06, 0x20,
		0x04, 0x30, 0x0C, 0x20,
		0x04, 0x18, 0x18, 0x20,
		0x04, 0x0C, 0x30, 0x20,
		0x04, 0x06, 0x60, 0x20,
		0x44, 0x03, 0xC0, 0x22,
		0x44, 0x01, 0x80, 0x22,
		0x44, 0x01, 0x80, 0x22,
		0x44, 0x01, 0x80, 0x22,
		0x44, 0x01, 0x80, 0x22,
		0x44, 0x01, 0x80, 0x22,
		0x44, 0x01, 0x80, 0x22,
		0x66, 0x01, 0x80, 0x66,
		0x33, 0x01, 0x80, 0xCC,
		0x19, 0x81, 0x81, 0x98,
		0x0C, 0xC1, 0x83, 0x30,
		0x07, 0xE1, 0x87, 0xE0,
		0x03, 0x3F, 0xFC, 0xC0,
		0x03, 0x31, 0x8C, 0xC0,
		0x03, 0x3F, 0xFC, 0xC0,
		0x06, 0x64, 0x26, 0x60,
		0x0C, 0xCC, 0x33, 0x30,
		0x18, 0xCC, 0x33, 0x18,
		0x10, 0xC4, 0x23, 0x08,
		0x10, 0x63, 0xC6, 0x08,
		0x10, 0x18, 0x18, 0x08,
		0x10, 0x00, 0x00, 0x08
	};
	/*static GLubyte Mask[128];
	FILE *fp;
	fp = fopen("mask.bmp", "rb");
	if (!fp)
	exit(0);
	if (fseek(fp, -(int)sizeof(Mask), SEEK_END))
	exit(0);
	if (!fread(Mask, sizeof(Mask), 1, fp))
	exit(0);
	fclose(fp);*/

	glEnable(GL_POLYGON_STIPPLE);
	glPolygonStipple(Mask);
	glRectf(-0.5f, -0.5f, 0.0f, 0.0f);// 左下方绘制一个有镂空效果的正方形
	glDisable(GL_POLYGON_STIPPLE);
	glRectf(0.0f, 0.0, 0.5, 0.5);// 右上方绘制一个无镂空效果的正方形

	glEnd();
	glFlush();
}

void init() {
	glClearColor(0.0, 0.0, 0.0, 0.0);
	glMatrixMode(GL_PROJECTION);
	glLoadIdentity();
	glOrtho(-1.0, 1.0, -1.0, 1.0, 0.0, -1.0);
	glMatrixMode(GL_MODELVIEW);
}

int main(int argc, char **argv) {
	glutInit(&argc, argv);
	glutInitWindowSize(400, 400);
	glutInitWindowPosition(200, 200);
	glutCreateWindow("test");
	init();
	glutDisplayFunc(display);
	glutMainLoop();
	return 0;
}